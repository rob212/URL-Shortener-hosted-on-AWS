# Authentication: Linking VSCode to your AWS Account

In our previous "ClickOps" iteration, you logged into the AWS Console with a username and password. To use the **CDK**, your terminal needs its own credentials to prove it has permission to create resources in your account.

---

## 1. Create a "CDK-Developer" IAM User

We don't want to use your "Root" account credentials for development. We will create a dedicated user with limited but sufficient permissions.

1.  Log into the **AWS Management Console**.
2.  Search for **IAM** (Identity and Access Management).
3.  Go to **Users** -> **Create user**.
    - **User name:** `cdk-dev-user`
    - **Console access:** (Optional) You can leave this unchecked for this user.
4.  **Set permissions:** Select "Attach policies directly."
    - Search for and check **`AdministratorAccess`**.
    - Click **Next**.
    - _Note: In a production environment, we use "Least Privilege," but for learning CDK, you need high-level access to create Buckets, Lambdas, and IAM Roles._
5.  Click **Create user**.

---

## 2. Generate Access Keys

Now we need the actual keys that the AWS CLI will use.

1.  Click on your newly created `cdk-dev-user`.
2.  Go to the **Security credentials** tab.
3.  Scroll down to **Access keys** and click **Create access key**.
4.  Select **Command Line Interface (CLI)** as the use case.
5.  Check the box "I understand the above recommendation and want to proceed..." and click **Next**.
6.  Click **Create access key**.

> **⚠️ CRITICAL SECURITY WARNING:**
> You will now see your **Access Key ID** and **Secret Access Key**.
>
> - **Copy them now.** You will never see the Secret Key again.
> - **Never commit these keys to Git.** If they end up on GitHub, bad actors will find them and could run up thousands of pounds in bills.

---

## 3. Configure the AWS CLI

Back in your terminal, we will "plug in" these keys.

1.  Run the following command:
    ```bash
    aws configure
    ```
2.  Enter the values when prompted:
    - **AWS Access Key ID:** `[Paste your Key ID]`
    - **AWS Secret Access Key:** `[Paste your Secret Key]`
    - **Default region name:** `eu-west-2` (or your preferred region)
    - **Default output format:** `json`

---

## 4. Verify the Connection

Let's make sure the "handshake" between your laptop and AWS is successful. Run:

```bash
aws sts get-caller-identity
```

If successful, you will see a JSON response containing your Account ID and the ARN for cdk-dev-user.

## If you see this, your terminal is able to interact with AWS via it's APIs.

## 5. The Final "Cloud Prep": Bootstrapping

Before CDK can deploy for the first time, it needs to set up a "staging area" in your AWS account (a small S3 bucket and some IAM roles). This is a one-time setup.

Run:

```bash
cdk bootstrap
```

#### Next Step

Your environment is ready. Your machine is authenticated. It’s time to start coding! Proceed to `01-initialisation/1.cdk-init.md` to scaffold your first stack.

### NOTE

> "If you ever think you've accidentally pushed your keys to GitHub, don't panic. Go straight to the IAM Console, find your user, and **Deactivate** or **Delete** the access key immediately. Then generate a new one."
